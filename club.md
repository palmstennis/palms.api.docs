1. Добавление слота для бронирования в Palms
post: /club/slots
{
	date_from,
	date_to,
	price,
	area_id
}
2. CRM обновляет статус слотов бронирования
post: /club/slots/:id
{
	status: 'NEW STATUS',
	date_from: 'new date',
	date_to: 'new date',
	price: 'new price',
	area_id: 'new area id'
}
3. CRM может запросить информацию о своих слотах бронирования в Palms
get: /club/slots?filters
{
	meta: {},
	data: []
}

4. CRM может запросить список заявок на бронирования
get: /club/bookings?filters

мы на каждом роуте изменения букинга проверяем текущий статус

5. Администратор меняет статус заявки (подверждает бронирование, отменяет, апрувит)
post: /club/bookings/:id/status

чтобы избежать зоопарка роутов
// post: /club/bookings/:id/cancel
// post: /club/bookings/:id/approve
// post: /club/bookings/:id/confirm

post: /user/bookings/:id/cancel (с проверкой статуса и указанием причины)

6. Администратор меняет даты бронирования
post: /club/bookings/:id/date

7. Администратор меняет данные бронирования
patch: /club/bookings/:id
{
	area_id,
	?price
}

8. Администратор закрывает бронирование и производит списание средств
post: /club/bookings/:id/close (capture, reports, сводка и тп)
? finished_at: Date (автоматически при Cancel и other)

- Списываются средства в пользу клуба, а статус

9. Клуб пересоздает слот для бронирования после отмены

### Модель Booking

- `id` - unsigned integer - идентификатор бронирования
- `date_from` - Date. ISO_8601 - старт времени бронирования
- `date_to` - Date. ISO_8601 - время окончания бронирования

- `status` - Booking Status - статус бронирования

- `price` - unsigned integer - стоимость бронирования
- `currency` - string. ISO_4217 - валюта списания
https://en.wikipedia.org/wiki/ISO_4217
`payments` - Payments[] - информация о платежах в рамках бронирования

`area` - Area - информация о корте
`slot` - Slot - информация о забронированном слоте
(also has area information)
`user` - User - информация о пользователе, который забронировал слот

`created_at` - Date - дата создания бронирования
`updated_at` - Date - дата последнего изменения бронирования
`finished_at` - Date - дата наступления терминального статуса бронирования

`reference_id` - unsigned integer - идентификатор бронирования во внешней системе (например, в CRM клуба)

### Модель Slot

`id` - unsigned integer - идентификатор слота
`date_from` - Date. ISO 8601 - время начала слота
`date_to` - Date. ISO 8601 - время окончания слота
`cancelation_time` - Date. ISO 8601 - максимальное время бесплатной отмены бронирования
`status` - Slot_Status - статус слота
`price` - unsigned integer - стоимость бронирования
`currency` - string. ISO_4217 - валюта списания
`area` - Area - информация о корте

### Модель User

`id` - unsigned integer - идентификатор пользователя
`name` - string - имя игрока
`phone_number` - string. E.164 - номер телефона в международном формате
https://en.wikipedia.org/wiki/E.164

? User_Club - связь клиента Palms и CRM системы клуба. Нужно ли нам это делать?
(скорее всего нет)

## Статусы бронирования

### Промежуточные статусы

- `REQUESTED` - пользователь запросил бронирование
- `APPROVED` - бронирование одобрено администратором
- `CONFIRMED` - бронирование подтверждено. пользователь не может самостоятельно отменить бронирование.

### Терминальные статусы
- `CANCELED_BY_CUSTOMER` - бронирование отменено пользователем
- `CANCELED_BY_CLUB` - бронирование отменено клубом
- `OTHER` - другая причина. с обязательным указанием причины. Технический статус

- `SHOWN` - клиент пришел. Считаем игру случившейся
- `NOT_SHOWN` - клиент не пришел. Клуб принимает решение о списании самостоятельно

Поле `finished_at` - флаг завершения процесса бронирования. Поле проставляется после наступления терминального статуса.

**До наступления терминального статуса** возможно изменение параметров бронирования: даты, корта, и тп.
**После наступления терминального статуса** изменение данных бронирования НЕВОЗМОЖНО.

[добавить информацию об ошибках]
